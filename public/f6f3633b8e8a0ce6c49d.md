---
title: reg-suitã¨roborazziã‚’ä½¿ç”¨ã—ãŸVRTã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹
tags:
  - Android
  - Kotlin
  - reg-suit
  - VRT
  - Roborazzi
private: false
updated_at: '2024-02-14T21:16:08+09:00'
id: f6f3633b8e8a0ce6c49d
organization_url_name: null
slide: false
ignorePublish: false
---
## ã¯ã˜ã‚ã«
ã“ã‚“ã«ã¡ã¯ã€ã“ã‚“ã°ã‚“ã¯ã€ä½è—¤ä½‘å“‰ã“ã¨ã•ã¨ã‚†ãƒ¼ã§ã™ã€‚ä»Šå›ã¯reg-suitã¨roborazziã‚’ä½¿ç”¨ã—ãŸVRTã‚’å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚
## å‹•æ©Ÿ
æœ€è¿‘ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§xmlãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Jetpack Composeã¸ã®ç§»è¡Œã‚’ã—ãŸéš›ã«ã€Jetpack Composeã«å…¥ã‚Œæ›¿ãˆã‚‹æ™‚ã€å¤‰æ›´å‰ã¨å¤‰æ›´å¾Œã®ç”»é¢ã‚’ç›®è¦–ã§æ¯”è¼ƒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã©ã§æ¼ã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚’æ©Ÿã«ã€æ©Ÿæ¢°çš„ã«åˆ†æã—ã¦ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ã‚¨ãƒ©ãƒ¼ã‚’ãªãã™ãŸã‚ã®ã€VRTã‚’è§¦ã£ã¦ã¿ãŸã„ã¨æ€ã†ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## ä½¿ç”¨æŠ€è¡“ã®ç´¹ä»‹
ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã™ã‚‹VRTãƒ„ãƒ¼ãƒ«ã®æŠ€è¡“ã¯reg-suitã¨roborazziã§ã™ã€‚


## roborazziã¨ã¯
roborazziã¨ã¯ã€Androidç«¯æœ«ã‚’ä½¿ã‚ãšã«JVMä¸Šã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€ãƒ†ã‚¹ãƒˆä¸­ã«ç”»åƒã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’å–å¾—ã—ã€äº‹å‰ã«å–å¾—ã—ã¦ãŠã„ãŸæœŸå¾…ã™ã‚‹ç”»é¢ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ã§æ¤œè¨¼ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
reg-suitã‚’ç”¨ã„ãŸã®ã¯ã€CA.flutterãªã©ã§ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ãŸã€

https://github.com/takahirom/roborazzi
## reg-suitã¨ã¯
reg-suitã¨ã¯ã€VRTã®ãŸã‚ã®CLIã‚’æä¾›ã™ã‚‹CLIã§ã‚ã‚Šã€ç¾åœ¨ã®ç”»åƒã¨ä»¥å‰ã®ç”»åƒã‚’æ¯”è¼ƒã—ã€HTMLã«å·®ç•°ã‚’æ¤œå‡ºã—ã¦ãã‚Œã‚‹ãŸã‚ã€å·®åˆ†ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://reg-viz.github.io/reg-suit/#github_integration


### ä½¿ç”¨ç†ç”±

- reg-suit:
    - [CA.flutter](https://cyberagent.connpass.com/event/298289/)ã®å‹‰å¼·ä¼šã§ã“ã®æŠ€è¡“ã‚’çŸ¥ã‚Šã€æœ¬ç•ªã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã‚‚ä½¿ç”¨ã•ã‚Œã‚‹ãã‚‰ã„ã®ä¿¡é ¼æ€§ã¨å®‰å®šæ€§ãŒã‚ã‚‹
- roborazzi
    - nowinandroidã‚„ä»–ã®ä¼æ¥­ã§ã‚‚æ¡ç”¨ã•ã‚Œã¦ãŠã‚Šã€éå¸¸ã«äººæ°—ãŒé«˜ã„
    - JVMä¸Šã§å‹•ããŸã‚ã€Androidã®ç’°å¢ƒã«ä¾å­˜ã—ãªã„ãƒ†ã‚¹ãƒˆã®å®Ÿç¾ãŒå¯èƒ½

## å®Ÿè£…ãƒ•ãƒ­ãƒ¼
ä»Šå›ã¯ã€VRTã®å®Ÿè£…ã®è¦³ç‚¹ã¨reg-suitã®æŠ€è¡“ã®éƒ½åˆä¸Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
- [ ] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
    - [ ] roborazziã®å°å…¥
    - [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
    - [ ] VRTã‚’è¡Œã†
- [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
    - [ ] reg-suitã®å°å…¥
    - [ ] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

## roborazziã‚’ä½¿ç”¨ã—ã¦ã€ç”»é¢ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

### roborazziã®ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 

roborazziã¯ã€ä¸‹è¨˜`README`ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’å‚è€ƒã«ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

https://github.com/takahirom/roborazzi?tab=readme-ov-file#try-it-out

> - [ ] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [ ] VRTã‚’è¡Œã†
>  - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [ ] reg-suitã®å°å…¥
>    - [ ] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

### roborazziã‚’ä½¿ç”¨ã—ã¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
æ¬¡ã«ã€roborazziã‚’ä½¿ç”¨ã—ã¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒã§ãã‚‹ã‚ˆã†ã«ã€`gradle.properties`ã§æ¬¡ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚
```properties
roborazzi.test.record=true
```

æ—©é€Ÿã€ã‚¹ã‚¯ãƒªãƒ¼ã‚·ãƒ§ãƒƒãƒˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ç°¡å˜ãªComposableã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚([ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰](https://github.com/dao0203/todo-sample-app/blob/main/feature/home/src/test/java/com/example/home/SampleTest.kt))

```kotlin
@RunWith(AndroidJUnit4::class)
@GraphicsMode(GraphicsMode.Mode.NATIVE)
@Config(sdk = [33], qualifiers = RobolectricDeviceQualifiers.Pixel7)
class SampleTest {
    @get:Rule
    val composeTestRule = createAndroidComposeRule<ComponentActivity>()

    @Test
    fun sampleTest() {
        composeTestRule.setContent { MaterialTheme { Text("Hello, World!") } }
        composeTestRule.onRoot().captureRoboImage("src/test/screenshots/Sample/sample_test.png")
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã®ã¿ã§ç°¡å˜ã«Composableã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§ãã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚([å®Ÿéš›ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯ã“ã¡ã‚‰](https://github.com/dao0203/todo-sample-app/blob/main/feature/home/src/test/screenshots/sample/sample_test.png))

![sample_test.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/a2c3393a-8cf3-a593-3335-a1adce1142e2.png)

> - [ ] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [ ] VRTã‚’è¡Œã†
>  - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [ ] reg-suitã®å°å…¥
>    - [ ] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

## roborazziã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
æ¬¡ã«ã€roborazziã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚
### ä»»æ„ã®ç”»é¢ã‚’ã‚»ãƒƒãƒˆ
ä»»æ„ã®Composableã‚’ãƒ†ã‚¹ãƒˆã«ã‚»ãƒƒãƒˆã—ã€å¤‰æ›´å‰ã®ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚
```kotlin
@RunWith(AndroidJUnit4::class)
@GraphicsMode(GraphicsMode.Mode.NATIVE)
@Config(sdk = [33], qualifiers = RobolectricDeviceQualifiers.Pixel7)
class HomeScreenTest {

    @get:Rule
    val composeTestRule = createAndroidComposeRule<ComponentActivity>()

    @get:Rule //å¾Œã«èª¬æ˜
    val roborazziRule = DefaultRoborazziRule

    @Test
    fun homeContent_success() {
        val uiState = HomeUiState.Success(
            uncompletedTodos = emptyList(),
            completedTodos = emptyList(),
            categories = listOf(myTaskCategory),
            selectedCategoryId = 1
        )
        val snackBarHostState = SnackbarHostState()
        composeTestRule.setContent {
            MaterialTheme {
                HomeContent(
                    uiState = uiState,
                    /*...*/
                )
            }
        }
        composeTestRule.onRoot().captureRoboImage()
    }
}
```

æ¬¡ã«Composableã®ãƒ¬ã‚¦ã‚¢ã‚¦ãƒˆã‚’å¤‰æ›´ã—ã¾ã™ã€‚
ä»Šå›ã¯ã€é©å½“ã«ç©ºç™½ã‚’å…¥ã‚Œã¦ãŠãã¾ã™ã€‚
```kotlin
Spacer(Modifier.height(8.dp))
```

### ã‚³ãƒãƒ³ãƒ‰ã®å…¥åŠ›
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¤‰æ›´å‰ã¨å¤‰æ›´å¾Œã®ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ¯”è¼ƒã—ã¦ãã‚Œã¾ã™ã€‚
https://github.com/takahirom/roborazzi?tab=readme-ov-file#build-setup

```bash
.gradlew compareRoborazziDebug
```

å…¥åŠ›å¾Œã«æ¬¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª`root_project/module_name/build/outputs/roborazzi/src/*`ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã™ã‚‹ã¨ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒ3æšå…¥ã£ã¦ã„ã¾ã™ã€‚
| `name.png` | `name_actual.png` |
|:-:|:-:|
| <img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/a0585c61-5803-21d9-3497-5e86e9b8db6e.png" width=200 > | <img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/8cba22b4-7410-0761-26a4-3f7a4d96d018.png" width=200 > |

| `name_compare.png` |
|:-:|
| <img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/e33a365d-a6f1-86b5-d442-7ac9ad3f7c57.png">  |

å¤‰æ›´å‰ã¨å¤‰æ›´å¾Œã€å·®åˆ†ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚
ã¾ãŸã€ãƒ•ã‚¡ã‚¤ãƒ«`root_project/module_name/build/reports/roborazzi/index.html`
ã‚’ã¿ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(ä¸€éƒ¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æŠœç²‹)

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2024-02-14 0.31.28.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/03a054ab-c7db-d61b-1075-1faf1d7f37ed.png)

> - [x] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [x] VRTã‚’è¡Œã†
> - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [ ] reg-suitã®å°å…¥
>    - [ ] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

## reg-suitã‚’ä½¿ç”¨ã—ã¦VRTã‚’è¡Œã†
### reg-suitã®å°å…¥
reg-suitã‚’æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å°å…¥ã™ã‚‹ãŸã‚ã«æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

```bash
$ reg-suit init
```

åˆæœŸåŒ–ãŒçµ‚ã‚ã‚‹ã¨ã€reg-suitã®è¨­å®šãŒå§‹ã¾ã‚Šã¾ã™ã€‚
```bash
? Working directory of reg-suit. .reg # reg-suitã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’æ±ºå®š
? Append ".reg" entry to your .gitignore file. Yes
? Directory contains actual images. directory_contains_actual_images //å¤‰æ›´å¾Œã®ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…ˆ
? Threshold, ranges from 0 to 1. Smaller value makes the comparison more sensitive. 0ã€€## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0
[reg-suit] info Set up reg-notify-github-plugin:
? notify-github plugin requires a client ID of reg-suit GitHub app. Open installation window in your browser Yes ## reg-notify-github-pluginã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã€ãƒªãƒã‚¸ãƒˆãƒªã®ClientIDãŒå¿…è¦
? This repositoriys client ID of reg-suit GitHub app #Repositoryã®ClientIDã‚’è¨˜å…¥
```

ä¸Šè¨˜ã®reg-suitã®è¨­å®šã‚’å®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã‚‹ã¨æ€ã„ã¾ã™ã€‚
```bash
root_project/ 
           â”œ package.json
           â”œ package-lock.json
           â”œ regconfig.json
           â”œ ...
```

> - [x] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [x] VRTã‚’è¡Œã†
> - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [x] reg-suitã®å°å…¥
>    - [ ] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

## roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
reg-suitã§ã¯ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®æ©Ÿèƒ½ã¯ãªã„ãŸã‚ã€roborazziã‚’ä½¿ç”¨ã—ã¦è£œå®Œã—ã¾ã™ã€‚

https://github.com/takahirom/roborazzi?tab=readme-ov-file#roborazzi-gradleproperties-options

```properties
## RoborazziRule.Options.outputDirectoryPathã§ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆå…ˆã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
roborazzi.record.filePathStrategy=relativePathFromRoborazziContextOutputDirectory

## ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚¯ãƒ©ã‚¹å.ãƒ¡ã‚½ãƒƒãƒ‰å.pngã¨çµ±ä¸€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
roborazzi.record.namingStrategy=testClassAndMethod
```

RoborazziRuleã‚’ä½¿ç”¨ã—ã¦ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’reg-suitå°å…¥æ™‚ã«å…¥ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…ˆã‚’è¨˜å…¥ã—ã¾ã™ã€‚

```kotlin
val DefaultRoborazziRule =
    RoborazziRule(RoborazziRule.Options(outputDirectoryPath = "../../actual_images"))

@get:Rule
val roborazziRule = DefaultRoborazziRule

```

ç¾åœ¨ã¯ã€Featureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸Šã§VRTã‚’è¡Œã£ã¦ã„ã‚‹ãŸã‚ã“ã®ã‚ˆã†ã«ã—ã¦ãŠã‚Šã¾ã™ãŒã€ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(designsytemmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã©)éšå±¤ãŒé•ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®VRTã‚’è¡Œã†éš›ã«ã¯ã€VRTå°‚ç”¨ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚‚ä½œã‚‹ã¨ã€ã‚ˆã‚Šã“ã®RoborazziRuleã®æ±ç”¨æ€§ãŒé«˜ã¾ã‚Šãã†ã ãªã¨è¨˜äº‹ã‚’æ›¸ããªãŒã‚‰æ°—ã¥ãã¾ã—ãŸã€‚

> - [x] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [x] VRTã‚’è¡Œã†
> - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [x] reg-suitã®å°å…¥
>    - [x] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [ ] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

### æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã

reg-suitã§ã¯ã€å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’.reg/expectedã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€æ‰‹å‹•ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠãã¾ã™ã€‚

> - [x] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [x] VRTã‚’è¡Œã†
> - [ ] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [x] reg-suitã®å°å…¥
>    - [x] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [x] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [ ] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

### roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

roborazziã‹ã‚‰å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã£ã¦ãŠãã¾ã™ã€‚
```bash
./gradlew recordRoborazziDebug # ./actual_imagesã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒå‡ºåŠ›ã•ã‚Œã‚‹
```
æ¬¡ã«ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã€reg-suitã«ã‚ˆã‚‹VRTã‚’è¡Œã„ã¾ã™ã€‚
```bash
reg-suit run
```
ã“ã‚Œã‚’ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™
```bash
.reg/
   â”œ actual/ # å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒå‡ºåŠ›ã•ã‚Œã‚‹
   â”œ diff/ # å·®åˆ†
   â”œ expeted/ # æ‰‹å‹•ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
   â”œ index.html # å·®åˆ†ãƒ¬ãƒãƒ¼ãƒˆ
   â”œ ...
```

`index.html`ã¯ã“ã¡ã‚‰ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚reg-suitã¯æ©Ÿèƒ½æº€è¼‰ã§ã€å·®åˆ†ãŒã¨ã¦ã‚‚ã¿ã‚„ã™ã„ã‚µã‚¤ãƒˆã«ãªã£ã¦ã„ã¾ã—ãŸã€‚

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2024-02-14 1.43.52.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/1947591c-4c0c-b208-c2ed-97d486e2b3df.png)

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2024-02-14 1.46.02.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2989029/c239110f-d3d9-0282-d40f-cbf7bbfa42ce.png)

ã“ã‚Œã§ã€roborazziã¨reg-suitã‚’ä½¿ç”¨ã—ãŸVRTã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã—ãŸğŸ‰
> - [x] roborazziã‚’ä½¿ç”¨ã—ã¦ã€å…ˆã»ã©ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨VRTã‚’è¡Œã†
>    - [x] roborazziã®å°å…¥
>    - [x] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹
>    - [x] VRTã‚’è¡Œã†
> - [x] reg-suitã‚’ä½¿ç”¨ã—ã¦roborazziã§å–å¾—ã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€VRTã‚’è¡Œã†
>    - [x] reg-suitã®å°å…¥
>    - [x] roborazziã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆã‚’å¤‰æ›´ã™ã‚‹
>    - [x] æ‰‹å‹•ã§å¤‰æ›´å‰ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å…¥ã‚Œã¦ãŠã
>    - [x] roborazziã§å¤‰æ›´å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚Šã€VRTã‚’è¡Œã†

# ã¾ã¨ã‚
æœ¬è¨˜äº‹ã§ã¯ã€reg-suitã¨roborazziã‚’ä½¿ç”¨ã—ãŸVRTã‚’å®Ÿè£…ã„ãŸã—ã¾ã—ãŸã€‚
å€‹äººçš„ã«å®Ÿè£…ã‚³ã‚¹ãƒˆã‚„Androidã‚¢ãƒ—ãƒªé–‹ç™ºã«ãŠã‘ã‚‹æ±ç”¨æ€§ã‚’è€ƒãˆã‚‹ã¨ã€roborazziãŒã‹ãªã‚Šä½¿ã„å‹æ‰‹ãŒè‰¯ã•ãã†ã§ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ç´°ã‹ãªèª¿æ•´ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé‡è¦–ã•ã‚Œã‚‹å ´åˆã¯ã€reg-suitã‚’ä½¿ç”¨ã—ã¦ã¿ã‚‹ã®ã‚‚ã‚ã‚Šã ã¨æ„Ÿã˜ã¾ã—ãŸï¼

èª°ã‹ã®é–‹ç™ºã®åŠ©ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ğŸ™‡â€â™‚ï¸
